<!-- Energy View - Futuristic Power Analytics Template -->
<div id="view-energy" class="h-full hidden overflow-hidden energy-view-futuristic">
    <!-- Animated Background Grid -->
    <div class="energy-grid-bg"></div>
    <div class="energy-scan-line"></div>

    <div class="h-full flex flex-col p-4 relative z-10">
        <!-- Header -->
        <div class="flex items-center justify-between mb-3">
            <div class="flex items-center gap-4">
                <div class="energy-logo-container">
                    <div class="energy-logo-ring"></div>
                    <svg class="w-6 h-6 text-cyan-400 relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                </div>
                <div>
                    <h2 class="text-xl font-light tracking-wide text-white/90">POWER ANALYTICS</h2>
                    <p id="energyLastUpdate" class="text-cyan-400/60 text-xs font-mono">INITIALIZING...</p>
                </div>
            </div>
            <!-- Live Cost Display -->
            <div class="flex items-center gap-4">
                <div class="energy-cost-display">
                    <div class="text-[10px] text-white/40 uppercase tracking-widest">Today's Cost</div>
                    <div id="energyCostToday" class="text-lg font-light text-cyan-400 font-mono">R 0.00</div>
                </div>
                <!-- Wall Display Mode Button -->
                <button data-action="showView" data-param-view="energy-display" class="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500/20 to-purple-500/20 hover:from-cyan-500/30 hover:to-purple-500/30 border border-cyan-500/30 hover:border-cyan-500/50 flex items-center justify-center transition-all duration-300 group" title="Wall Display Mode">
                    <svg class="w-5 h-5 text-cyan-400 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                </button>
                <button data-action="showHome" class="w-10 h-10 rounded-xl bg-white/5 hover:bg-cyan-500/20 border border-white/10 hover:border-cyan-500/50 flex items-center justify-center transition-all duration-300">
                    <svg class="w-5 h-5 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Main Grid Layout -->
        <div class="flex-1 grid grid-cols-12 gap-3 min-h-0">
            <!-- LEFT: Power Sources Column -->
            <div class="col-span-3 flex flex-col gap-3">
                <!-- Solar Card -->
                <div class="flex-1 energy-card-neo energy-card-solar">
                    <div class="energy-card-header">
                        <span class="energy-card-label">SOLAR</span>
                        <span id="solarStatus" class="energy-status-dot active"></span>
                    </div>
                    <div class="energy-value-large" id="solarPower">0</div>
                    <div class="energy-unit">WATTS</div>
                    <div class="energy-card-bar">
                        <div id="solarBar" class="energy-bar-fill solar" style="width: 0%"></div>
                    </div>
                    <div class="energy-card-detail">
                        <div><span class="text-white/40">PV1</span> <span id="pv1Power" class="text-amber-400 font-mono">0W</span></div>
                        <div><span class="text-white/40">PV2</span> <span id="pv2Power" class="text-amber-400 font-mono">0W</span></div>
                    </div>
                </div>

                <!-- Battery Card -->
                <div class="flex-1 energy-card-neo energy-card-battery">
                    <div class="energy-card-header">
                        <span class="energy-card-label">BATTERY</span>
                        <span id="batteryStatus" class="energy-status-dot"></span>
                    </div>
                    <div class="flex items-baseline gap-1">
                        <div class="energy-value-large" id="batteryPercent">0</div>
                        <span class="text-2xl text-emerald-400/60">%</span>
                    </div>
                    <div id="batteryState" class="energy-unit">IDLE</div>
                    <div class="energy-card-bar">
                        <div id="batteryBar" class="energy-bar-fill battery" style="width: 0%"></div>
                    </div>
                    <div class="energy-card-detail">
                        <div><span class="text-white/40">Power</span> <span id="batteryPower" class="text-emerald-400 font-mono">0W</span></div>
                        <div><span class="text-white/40">Temp</span> <span id="batteryTemp" class="text-emerald-400 font-mono">0Â°C</span></div>
                    </div>
                </div>
            </div>

            <!-- CENTER: Chart + Appliances Column -->
            <div class="col-span-6 flex flex-col gap-3">
                <!-- 6-Hour Trend Chart -->
                <div class="flex-1 energy-card-neo energy-card-chart flex flex-col">
                    <div class="energy-card-header mb-1">
                        <span class="energy-card-label">6-HOUR POWER TREND</span>
                        <div class="flex items-center gap-3">
                            <div class="flex items-center gap-1">
                                <span class="w-2 h-2 rounded-full bg-cyan-400"></span>
                                <span class="text-[10px] text-white/50">ACTUAL</span>
                            </div>
                            <div class="flex items-center gap-1">
                                <span class="w-2 h-2 rounded-full bg-purple-400/50"></span>
                                <span class="text-[10px] text-white/50">AVG</span>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Container -->
                    <div id="chartContainer" class="flex-1 relative min-h-0">
                        <canvas id="energyTrendChart" class="absolute inset-0"></canvas>
                        <!-- Y-Axis Labels -->
                        <div class="absolute left-0 top-0 bottom-4 w-10 flex flex-col justify-between text-[9px] text-white/30 font-mono">
                            <span id="chartYMax">8kW</span>
                            <span id="chartYMid">4kW</span>
                            <span>0kW</span>
                        </div>
                        <!-- Current Power Indicator -->
                        <div id="chartCurrentIndicator" class="absolute right-2 top-1 energy-current-power">
                            <div class="text-[10px] text-white/40 uppercase">Now</div>
                            <div id="chartCurrentValue" class="text-base font-mono text-cyan-400">0W</div>
                        </div>
                    </div>

                    <!-- Time Labels -->
                    <div class="flex justify-between px-10 text-[8px] text-white/30 font-mono mt-1">
                        <span id="chartT0">-6h</span>
                        <span id="chartT1">-5h</span>
                        <span id="chartT2">-4h</span>
                        <span id="chartT3">-3h</span>
                        <span id="chartT4">-2h</span>
                        <span id="chartT5">-1h</span>
                        <span>Now</span>
                    </div>
                </div>

                <!-- Appliance Power Monitors -->
                <div class="flex-1 grid grid-cols-2 gap-3">
                    <!-- Washing Machine -->
                    <div class="energy-card-neo energy-card-appliance" id="washerCard">
                        <div class="energy-card-header">
                            <span class="energy-card-label">WASHING MACHINE</span>
                            <span id="washerStatusDot" class="energy-status-dot"></span>
                        </div>
                        <div class="flex items-center gap-4">
                            <!-- Donut Chart -->
                            <div class="appliance-donut-container">
                                <svg class="appliance-donut" viewBox="0 0 100 100">
                                    <circle class="donut-bg" cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.08)" stroke-width="10"/>
                                    <circle id="washerDonutRing" class="donut-ring" cx="50" cy="50" r="40" fill="none"
                                        stroke="#22c55e" stroke-width="10" stroke-linecap="round"
                                        stroke-dasharray="251.3" stroke-dashoffset="251.3"
                                        transform="rotate(-90 50 50)"/>
                                </svg>
                                <div class="appliance-donut-icon">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10" stroke-width="1.5"/>
                                        <circle cx="12" cy="12" r="6" stroke-width="1.5"/>
                                        <circle cx="12" cy="12" r="2" fill="currentColor"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-baseline gap-1">
                                    <span id="washerPowerValue" class="text-3xl font-light text-white">0</span>
                                    <span class="text-lg text-white/40">W</span>
                                </div>
                                <div id="washerStateLabel" class="text-[10px] text-white/40 uppercase tracking-wider">IDLE</div>
                                <div class="mt-2 text-xs">
                                    <span class="text-white/30">Today:</span>
                                    <span id="washerTodayEnergy" class="text-cyan-400 font-mono ml-1">0 kWh</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Dishwasher -->
                    <div class="energy-card-neo energy-card-appliance" id="dishwasherCard">
                        <div class="energy-card-header">
                            <span class="energy-card-label">DISHWASHER</span>
                            <span id="dishwasherStatusDot" class="energy-status-dot"></span>
                        </div>
                        <div class="flex items-center gap-4">
                            <!-- Donut Chart -->
                            <div class="appliance-donut-container">
                                <svg class="appliance-donut" viewBox="0 0 100 100">
                                    <circle class="donut-bg" cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.08)" stroke-width="10"/>
                                    <circle id="dishwasherDonutRing" class="donut-ring" cx="50" cy="50" r="40" fill="none"
                                        stroke="#22c55e" stroke-width="10" stroke-linecap="round"
                                        stroke-dasharray="251.3" stroke-dashoffset="251.3"
                                        transform="rotate(-90 50 50)"/>
                                </svg>
                                <div class="appliance-donut-icon">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <rect x="4" y="2" width="16" height="20" rx="2" stroke-width="1.5"/>
                                        <line x1="4" y1="8" x2="20" y2="8" stroke-width="1.5"/>
                                        <circle cx="12" cy="14" r="3" stroke-width="1.5"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-baseline gap-1">
                                    <span id="dishwasherPowerValue" class="text-3xl font-light text-white">0</span>
                                    <span class="text-lg text-white/40">W</span>
                                </div>
                                <div id="dishwasherStateLabel" class="text-[10px] text-white/40 uppercase tracking-wider">IDLE</div>
                                <div class="mt-2 text-xs">
                                    <span class="text-white/30">Today:</span>
                                    <span id="dishwasherTodayEnergy" class="text-cyan-400 font-mono ml-1">0 kWh</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RIGHT: Grid & Load Column -->
            <div class="col-span-3 flex flex-col gap-3">
                <!-- Grid Card -->
                <div class="flex-1 energy-card-neo energy-card-grid">
                    <div class="energy-card-header">
                        <span class="energy-card-label">GRID</span>
                        <span id="gridStatus" class="energy-status-dot"></span>
                    </div>
                    <div class="energy-value-large" id="gridPower">0</div>
                    <div id="gridDirection" class="energy-unit">IDLE</div>
                    <div class="energy-card-bar">
                        <div id="gridBar" class="energy-bar-fill grid" style="width: 0%"></div>
                    </div>
                    <div class="energy-card-detail">
                        <div><span class="text-white/40">Voltage</span> <span id="gridVoltage" class="text-blue-400 font-mono">0V</span></div>
                        <div><span class="text-white/40">Freq</span> <span id="gridFrequency" class="text-blue-400 font-mono">0Hz</span></div>
                    </div>
                </div>

                <!-- Load Card -->
                <div class="flex-1 energy-card-neo energy-card-load">
                    <div class="energy-card-header">
                        <span class="energy-card-label">LOAD</span>
                        <span id="loadStatus" class="energy-status-dot active"></span>
                    </div>
                    <div class="energy-value-large" id="loadPower">0</div>
                    <div class="energy-unit">WATTS</div>
                    <div class="energy-card-bar">
                        <div id="loadBar" class="energy-bar-fill load" style="width: 0%"></div>
                    </div>
                    <div class="energy-card-detail">
                        <div><span class="text-white/40">Today</span> <span id="loadToday" class="text-purple-400 font-mono">0kWh</span></div>
                        <div><span class="text-white/40">Cost</span> <span id="loadCost" class="text-purple-400 font-mono">R0</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Stats Bar -->
        <div class="energy-stats-bar mt-3">
            <div class="energy-stat-item">
                <div class="energy-stat-icon solar">
                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/></svg>
                </div>
                <div>
                    <div class="energy-stat-label">SOLAR TODAY</div>
                    <div id="solarToday" class="energy-stat-value text-amber-400">0 kWh</div>
                </div>
            </div>
            <div class="energy-stat-divider"></div>
            <div class="energy-stat-item">
                <div class="energy-stat-icon import">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/></svg>
                </div>
                <div>
                    <div class="energy-stat-label">IMPORTED</div>
                    <div id="gridImportToday" class="energy-stat-value text-red-400">0 kWh</div>
                </div>
            </div>
            <div class="energy-stat-divider"></div>
            <!-- Geyser Control -->
            <div class="energy-stat-item energy-device-control">
                <button id="geyserControlBtn" data-action="toggleEntity" data-param-entity="switch.sonoff_10018908af"
                    class="device-toggle-btn" title="Toggle Geyser">
                    <div class="device-toggle-icon geyser">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"/>
                        </svg>
                    </div>
                    <div class="device-toggle-info">
                        <div class="device-toggle-label">GEYSER</div>
                        <div id="geyserState" class="device-toggle-state">Off</div>
                    </div>
                    <div id="geyserIndicator" class="device-toggle-indicator"></div>
                </button>
            </div>
            <div class="energy-stat-divider"></div>
            <!-- Pool Pump Control -->
            <div class="energy-stat-item energy-device-control">
                <button id="poolControlBtn" data-action="toggleEntity" data-param-entity="switch.sonoff_10017f2d90_1"
                    class="device-toggle-btn" title="Toggle Pool Pump">
                    <div class="device-toggle-icon pool">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/>
                        </svg>
                    </div>
                    <div class="device-toggle-info">
                        <div class="device-toggle-label">POOL</div>
                        <div id="poolState" class="device-toggle-state">Off</div>
                    </div>
                    <div id="poolIndicator" class="device-toggle-indicator"></div>
                </button>
            </div>
            <div class="energy-stat-divider"></div>
            <div class="energy-stat-item energy-stat-total">
                <div>
                    <div class="energy-stat-label">TOTAL PRODUCTION</div>
                    <div id="totalProduction" class="energy-stat-value text-cyan-400">0 MWh</div>
                </div>
            </div>
        </div>
    </div>
</div>
