<!-- Surveillance / Command Center View -->
<div id="view-surveillance" class="h-full hidden overflow-hidden surveillance-view-futuristic">
    <!-- Animated Background -->
    <div class="surv-grid-bg"></div>
    <div class="surv-scan-line"></div>

    <!-- Corner Accents -->
    <div class="surv-corner-accent top-left"></div>
    <div class="surv-corner-accent top-right"></div>
    <div class="surv-corner-accent bottom-left"></div>
    <div class="surv-corner-accent bottom-right"></div>

    <div class="h-full flex flex-col p-4 relative z-10">
        <!-- Compact Header -->
        <div class="flex items-center justify-between mb-3 flex-shrink-0">
            <div class="flex items-center gap-3">
                <div class="relative">
                    <div class="surv-logo-ring"></div>
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-rose-500/30 to-red-600/30 flex items-center justify-center border border-rose-500/30">
                        <svg class="w-5 h-5 text-rose-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                        </svg>
                    </div>
                </div>
                <div>
                    <h2 class="text-lg font-light tracking-wide text-white/90">COMMAND CENTER</h2>
                    <p id="survLastUpdate" class="text-rose-400/60 text-[10px] font-mono">INITIALIZING FRIGATE...</p>
                </div>
            </div>

            <!-- Compact Controls -->
            <div class="flex items-center gap-2">
                <!-- Time Filter Pills -->
                <div class="flex items-center bg-black/30 rounded-lg p-0.5 border border-white/5">
                    <button onclick="window.surveillance.setTimeFilter('1h')" class="surv-time-btn active" data-time="1h">1H</button>
                    <button onclick="window.surveillance.setTimeFilter('6h')" class="surv-time-btn" data-time="6h">6H</button>
                    <button onclick="window.surveillance.setTimeFilter('24h')" class="surv-time-btn" data-time="24h">24H</button>
                    <button onclick="window.surveillance.setTimeFilter('7d')" class="surv-time-btn" data-time="7d">7D</button>
                </div>

                <!-- Object Filter -->
                <div class="flex items-center bg-black/30 rounded-lg p-0.5 border border-white/5">
                    <button onclick="window.surveillance.setObjectFilter('all')" class="surv-obj-btn active" data-obj="all">All</button>
                    <button onclick="window.surveillance.setObjectFilter('person')" class="surv-obj-btn" data-obj="person" title="Person">
                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/></svg>
                    </button>
                    <button onclick="window.surveillance.setObjectFilter('car')" class="surv-obj-btn" data-obj="car" title="Vehicle">
                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path d="M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM3 9l2-4h10l2 4M3 9v6h14V9M3 9h14"/></svg>
                    </button>
                    <button onclick="window.surveillance.setObjectFilter('dog')" class="surv-obj-btn" data-obj="dog" title="Pet">
                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path d="M6 4a2 2 0 00-2 2v1.5a.5.5 0 01-.5.5H3a1 1 0 00-1 1v4a1 1 0 001 1h.5a.5.5 0 01.5.5V16a2 2 0 002 2h8a2 2 0 002-2v-1.5a.5.5 0 01.5-.5h.5a1 1 0 001-1V9a1 1 0 00-1-1h-.5a.5.5 0 01-.5-.5V6a2 2 0 00-2-2H6z"/></svg>
                    </button>
                </div>

                <!-- Actions -->
                <button onclick="window.surveillance.refresh()" class="surv-icon-btn" title="Refresh">
                    <svg id="survRefreshIcon" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                    </svg>
                </button>
                <a href="http://192.168.x.x:8971" target="_blank" class="surv-icon-btn" title="Open Frigate">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                    </svg>
                </a>
                <button data-action="showHome" class="surv-icon-btn surv-close-btn" title="Close">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="flex-1 flex flex-col gap-3 min-h-0 overflow-hidden">

            <!-- Top Section: Cameras + Events + Detail -->
            <div class="flex-1 grid grid-cols-12 gap-3 min-h-0 overflow-hidden">

                <!-- LEFT: Camera Grid with Status -->
                <div class="col-span-4 flex flex-col gap-3 overflow-hidden">
                    <!-- Camera Grid Card -->
                    <div class="surv-card-neo flex flex-col overflow-hidden" style="flex: 2;">
                        <div class="surv-card-header mb-2">
                            <div class="flex items-center gap-2">
                                <div class="w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"></div>
                                <span class="surv-card-label">LIVE FEEDS</span>
                            </div>
                            <span id="survCameraCount" class="text-[10px] text-rose-400 font-mono">4 CAM</span>
                        </div>
                        <!-- Compact 2x2 Camera Grid -->
                        <div id="survCameraGrid" class="surv-camera-grid-compact">
                            <!-- Camera tiles inserted by JS -->
                        </div>
                    </div>

                    <!-- Camera Health Status -->
                    <div class="surv-card-neo flex-shrink-0">
                        <div class="surv-card-header mb-2">
                            <span class="surv-card-label">SYSTEM STATUS</span>
                        </div>
                        <div id="survCameraHealth" class="grid grid-cols-2 gap-2">
                            <!-- Health indicators inserted by JS -->
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="surv-card-neo surv-stats-bar flex-shrink-0">
                        <div class="grid grid-cols-4 gap-2">
                            <div class="surv-stat-item">
                                <span id="survTodayEvents" class="surv-stat-value text-rose-400">0</span>
                                <span class="surv-stat-label">Events</span>
                            </div>
                            <div class="surv-stat-item">
                                <span id="survPersonCount" class="surv-stat-value text-amber-400">0</span>
                                <span class="surv-stat-label">People</span>
                            </div>
                            <div class="surv-stat-item">
                                <span id="survVehicleCount" class="surv-stat-value text-blue-400">0</span>
                                <span class="surv-stat-label">Vehicles</span>
                            </div>
                            <div class="surv-stat-item">
                                <span id="survAiAnalyzed" class="surv-stat-value text-emerald-400">0</span>
                                <span class="surv-stat-label">AI</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CENTER: Event Timeline -->
                <div class="col-span-5 flex flex-col gap-3 overflow-hidden">
                    <!-- Event List -->
                    <div class="surv-card-neo flex-1 flex flex-col min-h-0 overflow-hidden">
                        <div class="surv-card-header mb-2">
                            <div class="flex items-center gap-2">
                                <svg class="w-3.5 h-3.5 text-rose-400/80" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                                    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
                                </svg>
                                <span class="surv-card-label">AI EVENTS</span>
                            </div>
                            <span id="survEventCount" class="text-[10px] text-white/40 font-mono">Loading...</span>
                        </div>
                        <div id="survEventList" class="flex-1 overflow-y-auto no-scrollbar space-y-1.5 pr-1">
                            <!-- Loading state -->
                            <div class="surv-event-loading flex flex-col items-center justify-center h-full text-white/30">
                                <svg class="w-10 h-10 animate-spin mb-2 text-rose-400/40" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/>
                                </svg>
                                <span class="text-xs">Connecting...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RIGHT: Event Detail + Camera Filter -->
                <div class="col-span-3 flex flex-col gap-3 overflow-hidden">
                    <!-- Camera Filter Chips -->
                    <div class="surv-card-neo flex-shrink-0">
                        <div class="surv-card-header mb-1.5">
                            <span class="surv-card-label">FILTER</span>
                        </div>
                        <div id="survCameraFilter" class="flex flex-wrap gap-1">
                            <!-- Filter chips inserted by JS -->
                        </div>
                    </div>

                    <!-- Event Detail Panel -->
                    <div class="surv-card-neo flex-1 flex flex-col min-h-0 overflow-hidden">
                        <div class="surv-card-header mb-2">
                            <span class="surv-card-label">DETAIL</span>
                            <span id="survDetailTime" class="text-[10px] text-white/40 font-mono"></span>
                        </div>
                        <div id="survEventDetail" class="flex-1 flex flex-col overflow-hidden">
                            <!-- Empty State -->
                            <div id="survDetailEmpty" class="flex-1 flex flex-col items-center justify-center text-white/20">
                                <svg class="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                </svg>
                                <span class="text-xs">Select an event</span>
                            </div>

                            <!-- Detail Content -->
                            <div id="survDetailContent" class="hidden flex-1 flex flex-col overflow-hidden">
                                <!-- Snapshot -->
                                <div class="relative rounded-lg overflow-hidden mb-2 flex-shrink-0 bg-black/50 aspect-video surv-detail-snapshot-wrap">
                                    <img id="survDetailSnapshot" class="w-full h-full object-cover" src="" alt="">
                                    <button onclick="window.surveillance.playClip()" class="absolute inset-0 flex items-center justify-center bg-black/20 hover:bg-black/40 transition group">
                                        <div class="w-10 h-10 rounded-full bg-rose-500/80 flex items-center justify-center group-hover:scale-110 transition">
                                            <svg class="w-4 h-4 text-white ml-0.5" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"/>
                                            </svg>
                                        </div>
                                    </button>
                                    <div id="survDetailLabel" class="absolute top-1.5 left-1.5 px-1.5 py-0.5 rounded bg-rose-500/80 text-white text-[10px] font-medium flex items-center gap-1">
                                        <span>Person</span>
                                    </div>
                                    <div id="survDetailConfidence" class="absolute top-1.5 right-1.5 px-1.5 py-0.5 rounded bg-black/60 text-white text-[10px] font-mono">95%</div>
                                </div>

                                <!-- AI Analysis -->
                                <div class="flex-1 overflow-y-auto no-scrollbar">
                                    <div class="flex items-center gap-1.5 mb-1.5">
                                        <div class="w-4 h-4 rounded bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center">
                                            <svg class="w-2.5 h-2.5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                                            </svg>
                                        </div>
                                        <span class="text-[10px] text-white/50 uppercase">AI Analysis</span>
                                    </div>
                                    <div id="survAiText" class="text-[11px] text-white/70 leading-relaxed p-2 rounded-lg bg-violet-500/10 border border-violet-500/20">
                                        No analysis available.
                                    </div>
                                </div>

                                <!-- Actions -->
                                <div class="flex gap-1.5 mt-2 pt-2 border-t border-white/5 flex-shrink-0">
                                    <button onclick="window.surveillance.openInFrigate()" class="flex-1 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 text-[10px] text-white/60 hover:text-white transition flex items-center justify-center gap-1">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
                                        Frigate
                                    </button>
                                    <button onclick="window.surveillance.downloadClip()" class="flex-1 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 text-[10px] text-white/60 hover:text-white transition flex items-center justify-center gap-1">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                                        Save
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom: Timeline Scrubber Graph -->
            <div class="surv-card-neo surv-timeline-graph flex-shrink-0">
                <div class="flex items-center justify-between mb-2">
                    <div class="flex items-center gap-2">
                        <svg class="w-3.5 h-3.5 text-rose-400/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span class="surv-card-label">ACTIVITY TIMELINE</span>
                    </div>
                    <div class="flex items-center gap-3 text-[9px]">
                        <div class="flex items-center gap-1">
                            <div class="w-2 h-2 rounded-full bg-rose-500"></div>
                            <span class="text-white/40">Person</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <div class="w-2 h-2 rounded-full bg-blue-500"></div>
                            <span class="text-white/40">Vehicle</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <div class="w-2 h-2 rounded-full bg-amber-500"></div>
                            <span class="text-white/40">Pet</span>
                        </div>
                    </div>
                </div>
                <!-- Timeline Canvas -->
                <div id="survTimelineGraph" class="surv-timeline-canvas">
                    <div class="surv-timeline-bars" id="survTimelineBars">
                        <!-- Activity bars inserted by JS -->
                    </div>
                    <div class="surv-timeline-labels" id="survTimelineLabels">
                        <!-- Time labels inserted by JS -->
                    </div>
                    <div class="surv-timeline-scrubber" id="survTimelineScrubber"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Video Player Modal -->
<div id="survVideoModal" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-black/90 backdrop-blur-md" onclick="window.surveillance.closeVideoModal()"></div>
    <div class="absolute inset-4 flex items-center justify-center">
        <div class="relative w-full max-w-5xl">
            <button onclick="window.surveillance.closeVideoModal()" class="absolute -top-12 right-0 text-white/60 hover:text-white transition">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
            <video id="survVideoPlayer" class="w-full rounded-2xl shadow-2xl" controls autoplay>
                <source src="" type="video/mp4">
            </video>
        </div>
    </div>
</div>
